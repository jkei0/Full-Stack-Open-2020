(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{37:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(2),r=t.n(c),a=t(14),u=t.n(a),i=t(3),o=t(4),s=t.n(o),d="/api/persons",j=function(e){return s.a.post(d,e).then((function(e){return e.data}))},l=function(){return s.a.get(d).then((function(e){return e.data}))},b=function(e){var n="".concat(d,"/").concat(e);return s.a.delete(n).then((function(e){return e.data}))},h=function(e){var n="".concat(d,"/").concat(e.id);return s.a.put(n,e).then((function(e){return e.data}))},f=(t(37),t(0)),m=function(e){return e.persons.map((function(n){return Object(f.jsxs)("p",{children:[n.name," ",n.number,Object(f.jsx)("button",{onClick:function(){return e.deleteMe(n.id,n.name)},children:" delete "})]},n.name)}))},O=function(e){return Object(f.jsx)("form",{onSubmit:e.filterNames,children:Object(f.jsxs)("div",{children:["filter shown with ",Object(f.jsx)("input",{value:e.newFilter,onChange:e.handleFilterChange})]})})},v=function(e){return Object(f.jsxs)("form",{onSubmit:e.addNumber,children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{value:e.newName,onChange:e.handleNoteChange})]}),Object(f.jsxs)("div",{children:["number ",Object(f.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})},x=function(e){var n=e.message;return""===n?null:Object(f.jsx)("div",{className:"message",children:n})},p=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),u=Object(i.a)(a,2),o=u[0],s=u[1],d=Object(c.useState)(""),p=Object(i.a)(d,2),g=p[0],N=p[1],w=Object(c.useState)(""),C=Object(i.a)(w,2),S=C[0],k=C[1],F=Object(c.useState)(""),y=Object(i.a)(F,2),D=y[0],M=y[1];Object(c.useEffect)((function(){l().then((function(e){r(e)}))}),[]);var E=function(e){M(e),setTimeout((function(){M("")}),2e3)},I=S.length>0?t.filter((function(e){return-1!==e.name.indexOf(S)})):t;return Object(f.jsxs)("div",{children:[Object(f.jsx)(x,{message:D}),Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(O,{filterNames:function(e){e.preventDefault()},newFilter:S,handleFilterChange:function(e){k(e.target.value)}}),Object(f.jsx)("h2",{children:" add a new "}),Object(f.jsx)(v,{addNumber:function(e){if(e.preventDefault(),!1===t.some((function(e){return e.name===o}))){var n={name:o,number:g};j(n).then((function(e){r(t.concat(n)),s(""),N(""),E("".concat(n.name," added"))})).catch((function(e){E(e.response.data.error)}))}else{var c=t.find((function(e){return e.name===o}));c.number=g,h(c).then((function(e){r(t.map((function(n){return n.id!==e.id?n:e}))),s(""),N(""),E("".concat(c.name," number changed"))})).catch((function(e){E("Information of ".concat(c.name," has been already removed from the server"))}))}},newName:o,handleNoteChange:function(e){s(e.target.value)},newNumber:g,handleNumberChange:function(e){N(e.target.value)}}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)("div",{children:Object(f.jsx)(m,{persons:I,deleteMe:function(e,n){window.confirm("Delete ".concat(n,"?"))&&b(e).then((function(c){r(t.filter((function(n){return n.id!==e}))),E("".concat(n," deleted"))}))}})})]})};u.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(p,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.c9a913f3.chunk.js.map